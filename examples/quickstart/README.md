# Quick start example

![vsi-quickstart](../../reference-architectures/vsi-quickstart.drawio.svg)

This example deploys the following infrastructure:

- An edge VPC with 1 VSI in one of the three subnets and a VPC load balancer in the edge VPC, exposing the VSI publicly.
- A jump server VSI in the management VPC, exposing a public floating IP address.

:exclamation: **Important:** This example helps you get started quickly, but is not highly available or validated for the IBM Cloud Framework for Financial Services.

<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.3, < 1.5 |
| <a name="requirement_ibm"></a> [ibm](#requirement\_ibm) | 1.49.0 |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_landing_zone"></a> [landing\_zone](#module\_landing\_zone) | ../../patterns/vsi | n/a |

## Resources

No resources.

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_ibmcloud_api_key"></a> [ibmcloud\_api\_key](#input\_ibmcloud\_api\_key) | The IBM Cloud platform API key needed to deploy IAM enabled resources. | `string` | n/a | yes |
| <a name="input_override_json_string"></a> [override\_json\_string](#input\_override\_json\_string) | Override default values with custom JSON. Any value here other than an empty string will override all other configuration changes. | `string` | `"{\n   \"access_groups\": [],\n   \"appid\": {\n      \"keys\": [\n         \"slz-appid-key\"\n      ],\n      \"name\": \"slz-appid\",\n      \"resource_group\": \"slz-service-rg\",\n      \"use_appid\": false,\n      \"use_data\": false\n   },\n   \"clusters\": [],\n   \"enable_transit_gateway\": true,\n   \"transit_gateway_connections\": [\n      \"management\",\n      \"workload\"\n   ],\n   \"transit_gateway_resource_group\": \"slz-service-rg\",\n   \"virtual_private_endpoints\": [\n      {\n         \"resource_group\": \"slz-service-rg\",\n         \"service_name\": \"cos\",\n         \"service_type\": \"cloud-object-storage\",\n         \"vpcs\": [\n            {\n               \"name\": \"management\",\n               \"subnets\": [\n                  \"vpe-zone-1\"\n               ]\n            },\n            {\n               \"name\": \"workload\",\n               \"subnets\": [\n                  \"vpe-zone-1\"\n               ]\n            }\n         ]\n      }\n   ],\n   \"service_endpoints\": \"private\",\n   \"security_groups\": [],\n   \"vpn_gateways\": [],\n   \"atracker\": {\n      \"collector_bucket_name\": \"atracker-bucket\",\n      \"receive_global_events\": true,\n      \"resource_group\": \"slz-service-rg\",\n      \"add_route\": false\n   },\n   \"cos\": [\n      {\n         \"buckets\": [\n            {\n               \"endpoint_type\": \"public\",\n               \"force_delete\": true,\n               \"kms_key\": \"slz-atracker-key\",\n               \"name\": \"atracker-bucket\",\n               \"storage_class\": \"standard\"\n            }\n         ],\n         \"keys\": [\n            {\n               \"name\": \"cos-bind-key\",\n               \"role\": \"Writer\",\n               \"enable_HMAC\": false\n            }\n         ],\n         \"name\": \"atracker-cos\",\n         \"plan\": \"standard\",\n         \"random_suffix\": true,\n         \"resource_group\": \"slz-service-rg\",\n         \"use_data\": false\n      },\n      {\n         \"buckets\": [\n            {\n               \"endpoint_type\": \"public\",\n               \"force_delete\": true,\n               \"kms_key\": \"slz-key\",\n               \"name\": \"management-bucket\",\n               \"storage_class\": \"standard\"\n            },\n            {\n               \"endpoint_type\": \"public\",\n               \"force_delete\": true,\n               \"kms_key\": \"slz-key\",\n               \"name\": \"workload-bucket\",\n               \"storage_class\": \"standard\"\n            }\n         ],\n         \"keys\": [],\n         \"name\": \"cos\",\n         \"plan\": \"standard\",\n         \"random_suffix\": true,\n         \"resource_group\": \"slz-service-rg\",\n         \"use_data\": false\n      }\n   ],\n   \"iam_account_settings\": {\n      \"enable\": false\n   },\n   \"key_management\": {\n      \"keys\": [\n         {\n            \"key_ring\": \"slz-slz-ring\",\n            \"name\": \"slz-key\",\n            \"root_key\": true\n         },\n         {\n            \"key_ring\": \"slz-slz-ring\",\n            \"name\": \"slz-atracker-key\",\n            \"root_key\": true\n         },\n         {\n            \"key_ring\": \"slz-slz-ring\",\n            \"name\": \"slz-vsi-volume-key\",\n            \"root_key\": true\n         }\n      ],\n      \"name\": \"slz-kms\",\n      \"resource_group\": \"slz-service-rg\",\n      \"use_hs_crypto\": false\n   },\n   \"resource_groups\": [\n      {\n         \"create\": true,\n         \"name\": \"slz-service-rg\",\n         \"use_prefix\": true\n      },\n      {\n         \"create\": true,\n         \"name\": \"slz-management-rg\",\n         \"use_prefix\": true\n      },\n      {\n         \"create\": true,\n         \"name\": \"slz-workload-rg\",\n         \"use_prefix\": true\n      }\n   ],\n   \"secrets_manager\": {\n      \"kms_key_name\": null,\n      \"name\": null,\n      \"resource_group\": null,\n      \"use_secrets_manager\": false\n   },\n   \"network_cidr\": \"10.0.0.0/8\",\n   \"vpcs\": [\n      {\n         \"address_prefixes\": {\n            \"zone-1\": [],\n            \"zone-2\": [],\n            \"zone-3\": []\n         },\n         \"default_security_group_rules\": [],\n         \"flow_logs_bucket_name\": null,\n         \"network_acls\": [\n            {\n               \"name\": \"management-acl\",\n               \"rules\": [\n                  {\n                     \"action\": \"allow\",\n                     \"destination\": \"0.0.0.0/0\",\n                     \"direction\": \"inbound\",\n                     \"name\": \"allow-all-inbound\",\n                     \"source\": \"0.0.0.0/0\"\n                  },\n                  {\n                     \"action\": \"allow\",\n                     \"destination\": \"0.0.0.0/0\",\n                     \"direction\": \"outbound\",\n                     \"name\": \"allow-all-outbound\",\n                     \"source\": \"0.0.0.0/0\"\n                  }\n               ]\n            }\n         ],\n         \"prefix\": \"management\",\n         \"resource_group\": \"slz-management-rg\",\n         \"subnets\": {\n            \"zone-1\": [\n               {\n                  \"acl_name\": \"management-acl\",\n                  \"cidr\": \"10.10.10.0/24\",\n                  \"name\": \"vsi-zone-1\",\n                  \"public_gateway\": false\n               },\n               {\n                  \"acl_name\": \"management-acl\",\n                  \"cidr\": \"10.10.20.0/24\",\n                  \"name\": \"vpe-zone-1\",\n                  \"public_gateway\": false\n               }\n            ],\n            \"zone-2\": null,\n            \"zone-3\": null\n         },\n         \"use_public_gateways\": {\n            \"zone-1\": false,\n            \"zone-2\": false,\n            \"zone-3\": false\n         }\n      },\n      {\n         \"address_prefixes\": {\n            \"zone-1\": [],\n            \"zone-2\": [],\n            \"zone-3\": []\n         },\n         \"default_security_group_rules\": [],\n         \"flow_logs_bucket_name\": null,\n         \"network_acls\": [\n            {\n               \"name\": \"workload-acl\",\n               \"rules\": [\n                  {\n                     \"action\": \"allow\",\n                     \"destination\": \"0.0.0.0/0\",\n                     \"direction\": \"inbound\",\n                     \"name\": \"allow-all-inbound\",\n                     \"source\": \"0.0.0.0/0\"\n                  },\n                  {\n                     \"action\": \"allow\",\n                     \"destination\": \"0.0.0.0/0\",\n                     \"direction\": \"outbound\",\n                     \"name\": \"allow-all-outbound\",\n                     \"source\": \"0.0.0.0/0\"\n                  }\n               ]\n            }\n         ],\n         \"prefix\": \"workload\",\n         \"resource_group\": \"slz-workload-rg\",\n         \"subnets\": {\n            \"zone-1\": [\n               {\n                  \"acl_name\": \"workload-acl\",\n                  \"cidr\": \"10.20.10.0/24\",\n                  \"name\": \"vsi-zone-1\",\n                  \"public_gateway\": true\n               },\n               {\n                  \"acl_name\": \"workload-acl\",\n                  \"cidr\": \"10.20.20.0/24\",\n                  \"name\": \"vpe-zone-1\",\n                  \"public_gateway\": false\n               }\n            ],\n            \"zone-2\": null,\n            \"zone-3\": null\n         },\n         \"use_public_gateways\": {\n            \"zone-1\": false,\n            \"zone-2\": false,\n            \"zone-3\": false\n         }\n      }\n   ],\n   \"vsi\": [\n      {\n         \"boot_volume_encryption_key_name\": \"slz-vsi-volume-key\",\n         \"image_name\": \"ibm-ubuntu-18-04-6-minimal-amd64-2\",\n         \"machine_type\": \"cx2-2x4\",\n         \"name\": \"jump-box\",\n         \"resource_group\": \"slz-management-rg\",\n         \"enable_floating_ip\": true,\n         \"security_group\": {\n            \"name\": \"management\",\n            \"rules\": [\n               {\n                  \"direction\": \"inbound\",\n                  \"name\": \"allow-all-inbound\",\n                  \"source\": \"0.0.0.0/0\"\n               },\n               {\n                  \"direction\": \"outbound\",\n                  \"name\": \"allow-all-outbound\",\n                  \"source\": \"0.0.0.0/0\"\n               }\n            ],\n            \"vpc_name\": \"management\"\n         },\n         \"ssh_keys\": [\n            \"ssh-key\"\n         ],\n         \"subnet_names\": [\n            \"vsi-zone-1\"\n         ],\n         \"vpc_name\": \"management\",\n         \"vsi_per_subnet\": 1\n      },\n      {\n         \"boot_volume_encryption_key_name\": \"slz-vsi-volume-key\",\n         \"image_name\": \"ibm-ubuntu-18-04-6-minimal-amd64-2\",\n         \"machine_type\": \"cx2-2x4\",\n         \"name\": \"workload-server\",\n         \"resource_group\": \"slz-workload-rg\",\n         \"enable_floating_ip\": false,\n         \"security_group\": {\n            \"name\": \"workload\",\n            \"rules\": [\n               {\n                  \"direction\": \"inbound\",\n                  \"name\": \"allow-all-inbound\",\n                  \"source\": \"0.0.0.0/0\"\n               },\n               {\n                  \"direction\": \"outbound\",\n                  \"name\": \"allow-all-outbound\",\n                  \"source\": \"0.0.0.0/0\"\n               }\n            ],\n            \"vpc_name\": \"workload\"\n         },\n         \"ssh_keys\": [\n            \"ssh-key\"\n         ],\n         \"subnet_names\": [\n            \"vsi-zone-1\"\n         ],\n         \"vpc_name\": \"workload\",\n         \"vsi_per_subnet\": 1\n      }\n   ]\n}\n"` | no |
| <a name="input_prefix"></a> [prefix](#input\_prefix) | A unique identifier for resources. Must begin with a lowercase letter and end with a lowerccase letter or number. This prefix will be prepended to any resources provisioned by this template. Prefixes must be 16 or fewer characters. | `string` | `"land-zone-vsi-qs"` | no |
| <a name="input_region"></a> [region](#input\_region) | Region where VPC will be created. To find your VPC region, use `ibmcloud is regions` command to find available regions. | `string` | `"us-south"` | no |
| <a name="input_resource_tags"></a> [resource\_tags](#input\_resource\_tags) | Optional list of tags to be added to created resources | `list(string)` | `[]` | no |
| <a name="input_ssh_key"></a> [ssh\_key](#input\_ssh\_key) | Public SSH key to use to provision a VSI. Must be a valid SSH key that does not already exist in the deployment region. See https://cloud.ibm.com/docs/vpc?topic=vpc-ssh-keys. | `string` | n/a | yes |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_landing_zone"></a> [landing\_zone](#output\_landing\_zone) | Landing zone configuration |
<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
